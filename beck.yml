---
  - name: ReadJsonfile
    hosts: localhost
    gather_facts: false
    tasks:
      - name: setup
        setup:
          filter: ansible_date_time

      - name: register json as variable
        shell: cat json/beck.json
        register: result

      - name: set jsondata fact
        set_fact:
          jsondata: "{{ result.stdout | from_json }}"

      - name: set images fact
        set_fact:
          images: "{{ jsondata | json_query(jmesquery) }}"
        vars:
          jmesquery: "Stores[?Name=='Store 13'].Screens[?Name='Screen 1'].Schedules[?Date=='{{ ansible_date_time.date }}'].MorningRotation[].Images[].[Name, Path]"

      - name: copyImages
        copy: 
          src: /home/vagrant/ImageCache/{{ item[1] }}/{{ item[0] }}
          dest: /home/vagrant/Synced/Store13/Screen1/
        with_items:
          - "{{ images }}"
...       
